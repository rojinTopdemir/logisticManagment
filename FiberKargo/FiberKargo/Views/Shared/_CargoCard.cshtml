@model FiberKargo.Models.Cargo

<div class="card cargo-card mb-3 shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
        <strong><i class="bi bi-box-seam me-2"></i>@Model.CargoNo</strong>
        @{
            var statusClass = Model.Status == "Teslim Edildi" ? "bg-success" :
                             Model.Status == "Dağıtımda" ? "bg-warning text-dark" : "bg-info";
        }
        <span class="badge @statusClass">@Model.Status</span>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h6 class="text-muted mb-2"><i class="bi bi-person me-1"></i>Gönderici</h6>
                <p class="mb-1"><strong>@Model.SenderName</strong></p>
                <p class="text-muted mb-3"><i class="bi bi-telephone me-1"></i>@Model.SenderTel</p>
            </div>
            <div class="col-md-6">
                <h6 class="text-muted mb-2"><i class="bi bi-person-check me-1"></i>Alıcı</h6>
                <p class="mb-1"><strong>@Model.ReceiverName</strong></p>
                <p class="text-muted mb-3"><i class="bi bi-telephone me-1"></i>@Model.ReceiverTel</p>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-6">
                <small class="text-muted">Çıkış:</small>
                <span class="badge bg-secondary">@Model.Origin</span>
            </div>
            <div class="col-6">
                <small class="text-muted">Varış:</small>
                <span class="badge bg-primary">@Model.Destination</span>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-6">
                <small class="text-muted">İçerik:</small>
                <span>@Model.Content</span>
            </div>
            <div class="col-6">
                <small class="text-muted">Ağırlık:</small>
                <span>@Model.Weight.ToString("F1") kg</span>
            </div>
        </div>
    </div>
    <div class="card-footer d-flex justify-content-between align-items-center">
        <div>
            @if (Model.Price.HasValue)
            {
                <strong class="text-primary fs-5">@Model.Price.Value.ToString("F2") ₺</strong>
            }
            <br />
            <small class="text-muted">@Model.CreateTime.ToString("dd.MM.yyyy HH:mm")</small>
        </div>
        <div class="btn-group">
            @if (User.IsInRole("Admin"))
            {
                @* Admin için Dropdown Menü *@
                <div class="dropdown">
                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        <i class="bi bi-gear"></i>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="updateStatus(@Model.Id, 'Şubede')">Şubede</a></li>
                        <li><a class="dropdown-item" href="#" onclick="updateStatus(@Model.Id, 'Dağıtımda')">Dağıtımda</a></li>
                        <li><a class="dropdown-item" href="#" onclick="updateStatus(@Model.Id, 'Teslim Edildi')">Teslim Edildi</a></li>
                    </ul>
                </div>
            }
            else
            {
                @* Personel için Hızlı Aksiyon Butonları *@
                if (Model.Status == "Şubede")
                {
                    <button class="btn btn-sm btn-warning" onclick="sendToDistribution(@Model.Id)" title="Dağıtıma Gönder">
                        <i class="bi bi-truck"></i>
                    </button>
                }
                else if (Model.Status == "Dağıtımda")
                {
                    <button class="btn btn-sm btn-success" onclick="deliverCargo(@Model.Id)" title="Teslim Et">
                        <i class="bi bi-check-lg"></i>
                    </button>
                }
                <a href="@Url.Action("EditCargo", "Personel", new { id = Model.Id })" class="btn btn-sm btn-outline-primary">
                    <i class="bi bi-pencil"></i>
                </a>
            }
        </div>
    </div>
</div>